generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model FamilyMember {
  id                      String         @id @default(cuid())
  email                   String         @unique
  password                String
  firstName               String
  lastName                String
  gender                  String
  isAlive                 Boolean        @default(true)
  dateOfBirth             DateTime
  placeOfBirth            String?
  role                    String         @default("member")
  lastLoginAt             DateTime?
  createdAt               DateTime       @default(now())
  updatedAt               DateTime       @updatedAt
  spouseId                String?        @unique
  fatherId                String?
  motherId                String?
  address                 String?
  anniversaryDate         DateTime?
  bloodGroup              String?
  education               String?
  maritalStatus           String?
  notes                   String?
  occupation              String?
  phoneNumber             String?
  deathAnniversaryDate    DateTime?
  profilePicture          String?
  activities              Activity[]
  organizedEvents         Event[]        @relation("EventOrganizer")
  father                  FamilyMember?  @relation("Father", fields: [fatherId], references: [id])
  children                FamilyMember[] @relation("Father")
  mother                  FamilyMember?  @relation("Mother", fields: [motherId], references: [id])
  childrenOfMother        FamilyMember[] @relation("Mother")
  spouse                  FamilyMember?  @relation("Spouse", fields: [spouseId], references: [id])
  spouseOf                FamilyMember?  @relation("Spouse")
  attendedEvents          Event[]        @relation("EventAttendee")
  FamilyMember_Siblings_A FamilyMember[] @relation("Siblings")
  FamilyMember_Siblings_B FamilyMember[] @relation("Siblings")
}

model Event {
  id          String         @id @default(cuid())
  title       String
  description String?
  date        DateTime
  location    String?
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  organizerId String
  organizer   FamilyMember   @relation("EventOrganizer", fields: [organizerId], references: [id])
  attendees   FamilyMember[] @relation("EventAttendee")
}

model Activity {
  id          String       @id @default(cuid())
  type        String
  description String
  memberId    String
  createdAt   DateTime     @default(now())
  member      FamilyMember @relation(fields: [memberId], references: [id])
}
